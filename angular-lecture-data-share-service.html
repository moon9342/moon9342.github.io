<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Angular 강좌(13) - Service</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />


    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous">
    </script>

    <!-- 웹 폰트 설정 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- Font Awesome CDN 설정 => 느림.. -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- custom.css -->
    <link rel="stylesheet" href="/assets/built/custom.css">

    <!-- syntax.css -->
    <link rel="stylesheet" href="/assets/built/syntax.css">

    <!-- gist.css -->
    <link rel="stylesheet" href="/assets/built/better-gist-styles.css">

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--Dl Menu-->
    <script src="/assets/js/modernizr.custom.js"></script>
    <script src="/assets/js/jquery.dlmenu.js"></script>
    <script src="/assets/js/menu_main.js"></script>

    <!-- Google AdSense -->
    <script data-ad-client="ca-pub-2687024418565562" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="얼큰우동TV, 쉽게배우는 IT(Programming,Machine Learning,금융)" />
    <link rel="shortcut icon" href="http://localhost:4000/assets/built/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="http://localhost:4000/angular-lecture-data-share-service" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="IT Technical Training" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Angular 강좌(13) - Service" />
    <meta property="og:description" content="Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular 강좌(7) - 실습(2) Angular 강좌(8) - Material Table Angular 강좌(9) - 데이터공유(@Input) Angular 강좌(10) - 데이터공유(@Output) Angular" />
    <meta property="og:url" content="http://localhost:4000/angular-lecture-data-share-service" />
    <meta property="og:image" content="http://localhost:4000/assets/built/images/angular-logo.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2018-02-12T19:40:00+09:00" />
    <meta property="article:modified_time" content="2018-02-12T19:40:00+09:00" />
    <meta property="article:tag" content="Angular" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Angular 강좌(13) - Service" />
    <meta name="twitter:description" content="Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular 강좌(7) - 실습(2) Angular 강좌(8) - Material Table Angular 강좌(9) - 데이터공유(@Input) Angular 강좌(10) - 데이터공유(@Output) Angular" />
    <meta name="twitter:url" content="http://localhost:4000/" />
    <meta name="twitter:image" content="http://localhost:4000/assets/built/images/angular-logo.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="IT Technical Training" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Angular" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "IT Technical Training",
        "logo": "http://localhost:4000/"
    },
    "url": "http://localhost:4000/angular-lecture-data-share-service",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:4000/assets/built/images/angular-logo.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/angular-lecture-data-share-service"
    },
    "description": "Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular 강좌(7) - 실습(2) Angular 강좌(8) - Material Table Angular 강좌(9) - 데이터공유(@Input) Angular 강좌(10) - 데이터공유(@Output) Angular"
}
    </script>

    <!-- <script type="text/et-cetera" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/et-cetera">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <!-- 사용자 browser 확인 코드 - Chrome이 아니면 경고 메시지 출력 -->

    <script>
        var agent = navigator.userAgent.toLowerCase();
        var _iPhone = false;
        var _chrome = false;
        var result = false;
        if (agent.indexOf("iphone") != -1) {
            _iPhone = true;
        }
        if (agent.indexOf("chrome") != -1) {
            _chrome = true;
        }

        if( _iPhone || _chrome ) {
            result = true;
        }

        if( !result ) {
            alert("이 블로그는 Google Chrome Browser에 최적화 되어 있습니다 !!");
        }

    </script>

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Angular 강좌(13) - Service" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="http://localhost:4000">IT Technical Training</a>
            
        
        
            
<ul class="nav" role="menu">
<!--    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>-->
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
<!--
    <li class="nav-data-analysis-article" role="menuitem"><a href="/author/data-analysis/">Data Analysis(R)</a></li>
    <li class="nav-python-article" role="menuitem"><a href="/author/python/">Python</a></li>
    <li class="nav-python-article" role="menuitem"><a href="/tag/jekyll/">Jekyll</a></li>
    <li class="nav-miscellaneous-article" role="menuitem"><a href="/author/fragmentary-knowledge/">Miscellaneous Article</a></li>
-->
<!--
    <li class="nav-archive" role="menuitem">
        <a href="/archive.html">All Posts</a>
    </li>
-->
    <li class="nav-python" role="menuitem">
        <a href="/tag/jekyll/">Jekyll Blog 생성</a>
    </li>
    <li class="nav-python" role="menuitem">
        <a href="/tag/python/">Python</a>
    </li>
    <li class="nav-data-science" role="menuitem">
        <a href="/tag/data-science/">Data Science</a>
    </li>
    <li class="nav-machine-learning" role="menuitem">
        <a href="/tag/machine-learning/">Machine Learning</a>
    </li>
    <li class="nav-python" role="menuitem">
        <a href="/tag/r/">R 기초강의</a>
    </li>
<!--    <li class="nav-python" role="menuitem">-->
<!--        <a href="/tag/angular/">Angular</a>-->
<!--    </li>-->
    <li class="nav-python" role="menuitem">
        <a href="/tag/et-cetera/">Et cetera</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">All Posts</a>
    </li>
</ul>

<!-- 아래 내용이 있으면 홈 화면 좌측 상단에 Navigation 버튼이 생성됨.. 굳이 필요없어서 comment 처리 -->

<!--
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
    <button class="dl-trigger">Open Menu</button>
    <ul class="dl-menu">
        <li><a href="http://localhost:4000/">Home</a></li>
        <li>
            <a href="#">About</a>
            <ul class="dl-submenu">
                <li style="text-align: center">
                    <img src="http://localhost:4000/assets/built/images/photo.jpg" alt="SungHoon Moon photo" class="author-photo">
                </li>
                <li>
                    <h4>SungHoon Moon</h4>
                    <p>Director of ATGLab. <br>Ph.D. in Computer Science</p>
                </li>
                <li><a href="http://localhost:4000/about/"><i class="fa fa-external-link"></i><span class="btn btn-inverse"> Learn More</span></a></li>
                <li>
                <a href="mailto:moon9342@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
            </li>
                
                
                
                
                
                
                
                
                
            </ul>
        </li>
        <li>
            <a href="#">Posts</a>
            <ul class="dl-submenu">
                <li><a href="http://localhost:4000/archive">All Posts</a></li>
                <li><a href="http://localhost:4000/author_archive">All Tags</a></li>
            </ul>
        </li>
        
    </ul>
</nav>
-->
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-front-end ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="12 February 2018">12 February 2018</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/angular/'>ANGULAR</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Angular 강좌(13) - Service</h1>
            </header>

            
<!--
            post에 cover image를 표시하지 않게 설정
            <figure class="post-full-image" style="background-image: url(/assets/built/images/angular-logo.png)">
            </figure>
-->
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p><span class="table-of-contents-list">Angular 강좌는 여러 절로 구성되어 있습니다. </span></p>
<ul class="table-of-contents-list">
    <li><a href="./angular-lecture-introduction">Angular 강좌(1) - Introduction</a></li>
    <li><a href="./angular-lecture-development-environment">Angular 강좌(2) - 개발환경세팅</a></li>
    <li><a href="./angular-lecture-component">Angular 강좌(3) - Component</a></li>
    <li><a href="./angular-lecture-material">Angular 강좌(4) - Angular Material</a></li>
    <li><a href="./angular-lecture-exercise-1">Angular 강좌(5) - 실습(1)</a></li>
    <li><a href="./angular-lecture-databinding">Angular 강좌(6) - Data Binding</a></li>
    <li><a href="./angular-lecture-exercise-2">Angular 강좌(7) - 실습(2)</a></li>
    <li><a href="./angular-lecture-material-table">Angular 강좌(8) - Material Table</a></li>
    <li><a href="./angular-lecture-data-share-1">Angular 강좌(9) - 데이터공유(@Input)</a></li>
    <li><a href="./angular-lecture-data-share-2">Angular 강좌(10) - 데이터공유(@Output)</a></li>
    <li><a href="./angular-lecture-data-share-3">Angular 강좌(11) - 데이터공유(@ViewChild)</a></li>
    <li><a href="./angular-lecture-data-share-4">Angular 강좌(12) - 데이터공유(Content Projection)</a></li>
    <li><a href="./angular-lecture-data-share-service">Angular 강좌(13) - Service</a></li>
    <li><a href="./angular-lecture-data-share-service-mediator-pattern">Angular 강좌(14) - Service Mediator Pattern</a></li>
    <li><a href="./angular-lecture-data-share-service-rxjs">Angular 강좌(15) - Service RxJS</a></li>
    <li><a href="./angular-lecture-table-event">Angular 강좌(16) - Material Table Event</a></li>
    <li><a href="./angular-lecture-inspection-1">Angular 강좌(17) - 중간 정리</a></li>
    <li><a href="./angular-lecture-directive">Angular 강좌(18) - Directive</a></li>
    <li><a href="./angular-lecture-pipe">Angular 강좌(19) - Pipe</a></li>
    <li><a href="./angular-lecture-lifecycle">Angular 강좌(20) - Component Lifecycle</a></li>
</ul>

<hr />

<p><strong class="subtitle_fontAwesome">Service</strong></p>

<p>이번 포스트는 Angular의 <code class="highlighter-rouge">Service</code>에 대해서 알아보겠습니다. 먼저 Service의 기본적인 사항들을 알아본 후 이를 통해 데이터를 공유하는
<code class="highlighter-rouge">Service Mediator Pattern</code>으로 넘어가면 될 듯 하네요.</p>

<p>이 Service는 Angular에만 존재하는 개념이 아닙니다. 객체지향 프로그래밍을 다뤄보신 분은 익히 들어본 개념입니다. 특히 <code class="highlighter-rouge">Spring</code>과 
같은 Framework이나 <code class="highlighter-rouge">MVC</code> Pattern을 다뤄보신 분들이라면 쉽게 이해하실 수 있는 내용입니다.</p>

<p>우리는 Angular를 하고 있으니 여기에 맞춰 설명을 하자면 Component는 View를 표현하고 관리하는게 주된 역할입니다. 즉, 데이터를 
받아와서 View에 출력한다던지 View의 값이 변경되면 그걸 또 어떻게 처리한다던지하는 View와 밀접한 로직을 Component class가
가지고 있게 됩니다.</p>

<p>만약 View를 처리하는 로직 이외의 별도의 로직이 필요하면 그 로직은 어디에 두는것이 좋을까요? 로그인 처리를 할때
필요한 인증로직이라던지 혹은 서버와의 데이터 통신을 위한 REST 서버의 호출같은 로직을 그냥 필요할 때마다 Component안에 
집어 넣어서 처리하는게 좋을까요?</p>

<p>우리는 <code class="highlighter-rouge">CBD</code>(Component Based Development)를 하고 있습니다. 각각의 Component는 자신의 주된 관심사에 집중하게끔 코드를 작성해야
합니다. 객체지향설계에서 얘기하는 <code class="highlighter-rouge">SRP</code>(Single Responsibility Principle)을 생각하시면 됩니다. Component안에 다른 관심사가
존재하면 Component의 독립성이 보장되지 못하고 결국 중복 코드가 발생하며 Component의 재사용과 유지보수에 문제가 발생하게
되겠죠.</p>

<p>그래서 위에서 얘기한 별도의 로직들은 다른 곳에서 관리할 필요가 있습니다. 
<code class="highlighter-rouge">Service</code>라는 걸 이용해서 이 로직들을 작성하고 다른 Component에서 이 Service를 가져다가
사용하는 식으로 관리를 하면 <code class="highlighter-rouge">SoC</code>(Separation of Concern)원칙에 잘 들어맞을 거 같습니다.</p>

<p>이렇게 Component와 Service를 분리해서 작성하고 Component에서 Service를 사용하는 건 좋은데 
사용할 때 문제가 하나 있습니다. <code class="highlighter-rouge">Dependency</code>라는게 생기는 거죠. 쉽게 단위 코드로 Component에서
Service를 사용하는 예를 한번 보죠. 아래는 Component class입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">MyService</span> <span class="nx">service</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyService</span><span class="p">();</span>
<span class="nx">service</span><span class="p">.</span><span class="nx">getUserAuth</span><span class="p">(</span><span class="s1">'moon9342'</span><span class="p">);</span>
</code></pre></div></div>

<p>pseudocode 입니다. Component class안에서 직접 Service 객체를 생성해서 이용하는 경우입니다. 이런 경우 우리 Component는
Service에 의존하게 됩니다. 이걸 <code class="highlighter-rouge">Dependency Relationship</code>(의존관계)이 존재한다 라고 표현하기도 합니다. 이 때 Component
class의 입장에서 Service 객체를 <code class="highlighter-rouge">Dependency</code>라고 표현합니다.</p>

<p>이렇게 의존관계가 성립되면 Service가 변경되었을 때 우리 Component는 그에 따른 영향을 받을 수 밖에 없습니다. 
연관관계가 강하게 성립되어서 서로 독립적으로 사용하는게 힘들어지는것이고 재사용이나 유지보수에 문제가 생기게 되겠네요.</p>

<p>이 문제를 해결하는 Design Pattern이 바로 <code class="highlighter-rouge">DI</code>(Dependency Injection)입니다. 우리 Service객체(Dependency)를 사용하는 객체인
Component에게 주입해서 사용하는 것입니다. 주입하는 방법은 일반적으로 constructor를 이용하는 방법과 setter를 이용하는 방법이
있는데 Angular는 <code class="highlighter-rouge">constructor injection</code>을 지원합니다.</p>

<p>즉, Component가 직접 Service를 <code class="highlighter-rouge">new</code> keyword로 생성하는 것이 아니라 Angular Framework이 Service를 Component가 사용할 있도록
Service객체를 생성해서 Component에게 넣어주는 방식입니다. 이걸 <code class="highlighter-rouge">IoC</code>(Inversion of Control)라고 합니다. 
Angular Framework은 IoC Container입니다.</p>

<p>이론적인 배경을 간단히 설명했으니 이제 Service를 우리 예제에 추가해보겠습니다. Angular application은 Module의 집합입니다. 
Module은 크게 <code class="highlighter-rouge">Feature Module</code>과 <code class="highlighter-rouge">Shared Module</code>이 있다는 얘기 혹시 기억하시나요? 
어디에 Service를 생성하느냐 하는 문제인데 사실 case-by-case입니다.
특성상 여러 Feature Module에서 사용하는 공통 로직의 개념이면 따로 Shared Module을 만들어서 그 안에 Service를 
포함시키는게 좋습니다. 하지만 우리 예제처럼 <code class="highlighter-rouge">bookSearch</code> Module에서만 사용할 생각이면 해당 Module안에 포함시키는게
더 좋은 선택이겠죠.</p>

<hr />

<p><strong class="subtitle_fontAwesome">Service 생성</strong></p>

<p>다음의 코드를 이용해 우리 <code class="highlighter-rouge">bookSearch</code> Module에 서비스를 하나 추가합니다.</p>

<p>command 창을 열어서 다음과 같은 명령어를 실행시킵니다.</p>

<blockquote>
  <p><strong>ng generate service HttpSupport</strong></p>
</blockquote>

<p>성공적으로 수행되면 현재 Module 폴더에 2개의 파일이 생성됩니다. 하나는 SPEC 파일이고 나머지 하나가 바로 Service 입니다.</p>

<p>다음은 <code class="highlighter-rouge">http-support.service.ts</code> 파일의 내용입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">HttpSupportService</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>주의해서 보셔야 하는 부분은 <code class="highlighter-rouge">@Injectable</code> decorator입니다. 해당 class가 다른 class에 주입(Injection)될 수 있다는걸
의미합니다. 아까도 설명했듯이 주입은 생성자를 이용하게 되고 주입과정은 Angular Framework이 담당합니다.</p>

<p>이제 이 안에 JSON 데이터를 가져오는 코드를 작성해야 합니다. 우리 예제의 <code class="highlighter-rouge">list-box</code> Component는 View를 rendering할 때 
HttpClient를 이용해 JSON데이터를 가져와 Material Table로 화면에 바로 출력합니다. 이 부분을 변경해야겠죠.
<code class="highlighter-rouge">search-box</code> Component에서 Search! 버튼을 클릭하면 HttpClient를 이용해서 데이터를 가져와서 그 데이터를 <code class="highlighter-rouge">list-box</code>가
사용할 수 있도록 처리해야 합니다.</p>

<p>원래는 Back End 프로그램도 하나 작성해서 RESTful 서비스 하는걸 예로 들어야 하는데 서버쪽 프로그램이 없으니 그냥 JSON 파일로
부터 데이터를 받는걸로 처리했습니다.</p>

<p>다음은 수정된 <code class="highlighter-rouge">http-support.service.ts</code> 파일의 내용입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"@angular/common/http"</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">IBook</span> <span class="p">{</span>
  <span class="nl">bauthor</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bdate</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btranslator</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bpublisher</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btitle</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bprice</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nl">bisbn</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bimgurl</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">HttpSupportService</span> <span class="p">{</span>

  <span class="nl">books</span><span class="p">:</span> <span class="nx">IBook</span><span class="p">[];</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getJsonData</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="o">&lt;</span><span class="nx">IBook</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">'assets/data/book.json'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
           <span class="k">this</span><span class="p">.</span><span class="nx">books</span> <span class="o">=</span> <span class="nx">res</span><span class="p">;</span>
           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">);</span>
        <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>interface <code class="highlighter-rouge">IBook</code>도 저런식으로 코드마다 등장해서는 안되겠죠. 원래 따로 빼서 관리해야 합니다. 
하지만 예제를 좀 이해하기 쉽도록 그냥 중복해서 썻습니다. ^^;;</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<p>생성자로 인자가 하나 들어옵니다. 사실 이것도 HttpClient 타입의 객체가 우리 서비스 안으로 Injection되는 것입니다.
생성자에 인자를 받으면서 Access Modifier를 이용하면 class안에 속성으로 자동 지정됩니다. 여기서는 private으로 
Injection된 HttpClient 객체를 받았습니다.</p>

<p><code class="highlighter-rouge">getJsonData()</code> method가 호출되면 Injection받은 HttpClient 객체를 이용해서 파일로부터 
JSON 데이터를 읽어들인 후 console에 정상적으로 읽었는지 출력합니다.</p>

<hr />

<p><strong class="subtitle_fontAwesome">Service Injection</strong></p>

<p>위에서 생성한 Service 객체를 search-box Component에 Injection한 후 사용해 보겠습니다.</p>

<p>다음은 <code class="highlighter-rouge">search-box.component.ts</code> 파일의 내용입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
  <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span>
  <span class="nx">Input</span><span class="p">,</span> <span class="nx">Output</span><span class="p">,</span> <span class="nx">EventEmitter</span>
<span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpSupportService</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"../http-support.service"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-search-box'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./search-box.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./search-box.component.css'</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">HttpSupportService</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">SearchBoxComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="nl">_bookCategory</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="c1">//@Input() bookCategory:string;</span>
  <span class="c1">//@Input('bookCategory') mySelected:string;</span>

  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span>
  <span class="kd">set</span> <span class="nx">bookCategory</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 추가적인 작업이 들어올 수 있습니다.</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_bookCategory</span> <span class="o">=</span> <span class="s1">'category: '</span> <span class="o">+</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_bookCategory</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Output</span><span class="p">()</span> <span class="nx">searchEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="p">();</span>

  <span class="nx">keyword</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="na">httpSupportService</span><span class="p">:</span><span class="nx">HttpSupportService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="nx">setKeyword</span><span class="p">(</span><span class="na">keyword</span><span class="p">:</span> <span class="nx">string</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">keyword</span> <span class="o">=</span> <span class="nx">keyword</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">searchEvent</span><span class="p">.</span><span class="nx">emit</span><span class="p">({</span>
      <span class="na">keyword</span> <span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">keyword</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
      <span class="na">category</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">_bookCategory</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'category: '</span><span class="p">,</span><span class="s1">''</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">httpSupportService</span><span class="p">.</span><span class="nx">getJsonData</span><span class="p">();</span>

  <span class="p">}</span>

  <span class="nx">inputChange</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>기존 코드에서 변경된 부분을 살펴보면</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpSupportService</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"../http-support.service"</span><span class="p">;</span>
</code></pre></div></div>

<p>기본적으로 import는 시켜줘야 사용할 수 있겠지요.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">httpSupportService</span><span class="p">:</span><span class="nx">HttpSupportService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<p>constructor를 이용해 Service가 Injection되었습니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">httpSupportService</span><span class="p">.</span><span class="nx">getJsonData</span><span class="p">();</span>
</code></pre></div></div>

<p>Injection받은 Service의 method를 호출하는 부분입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-search-box'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./search-box.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./search-box.component.css'</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">HttpSupportService</span>
  <span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Angular Framework에 어떤 class가 Injection이 되는지 알려줘야 합니다. Component의 Metadata부분에
<code class="highlighter-rouge">providers</code>를 이용해 처리해야 합니다.</p>

<p>실행해보면 정상적으로 console에 JSON데이터가 출력되는걸 확인하실 수 있습니다.</p>

<hr />

<p><strong class="subtitle_fontAwesome">Injector</strong></p>

<p>기본적으로 Angular Framework은 dependency객체를 어떻게 생성해야 하는지 알지 못합니다. 그래서 우리가 Component의 
Metadata를 이용해서 <code class="highlighter-rouge">providers</code>에 그 정보를 명시했었지요. 이 정보를 근간으로 <code class="highlighter-rouge">Injector</code>가 의존객체를 생성하고
주입합니다.</p>

<p>정리하자면 Component가 생성될 때 Angualr는 Injection에 필요한 객체를 Injector에 요청합니다. 이 Injector는 
이미 생성한 객체들을 담고 있는 Container를 유지하고 있는데 이 안에 객체가 있으면 바로 주입하고 그렇지 않으면
의존객체를 생성한 후 주입하게 됩니다.</p>

<p>그림으로 표현하면 다음과 같습니다.</p>

<p><img src="assets/built/images/angular-injector.png" alt="angular-injector" /></p>
<div class="img-reference">( 이미지 출처 : https://angular.io/guide/architecture )</div>

<p>여기서 주의해야 할 점이 있는데 <strong>각각의 Component 각자 하나씩의 Injector를 가지고 있습니다.</strong> Component는 tree형식으로
구성되니 Injector 역시 tree형태로 구성이 되게됩니다. 만약 Injection요청에 대한 내용이 현재 Component의 providers부분에
명시되어 있지 않으면 부모 Component의 providers에서 검색하게 됩니다. 이렇게 부모로 타고 올라가면서 의존객체를 찾게 되는것이죠.
만약 상위 Component에서 의존객체를 생성해 놓았으면 하위 Component에서 따로 선언하지 않아도 사용이 가능합니다.</p>

<p>또한 Component의 providers에 등록해 놓을 수도 있지만 Module의 providers에도 등록할 수 있습니다. 이런 경우 해당 Module안에
있는 모든 Component들이 해당 의존모듈을 사용할 수 있게 되겠네요. 최상위 Component인 Root Component가 가지고 있는
Root Injector는 Application 전역에서 사용가능한 의존모듈을 가지고 있게 되겠네요.</p>

<hr />

<p><strong class="subtitle_fontAwesome">Provider</strong></p>

<p>위에서 설명했듯이 Module안에 providers로 등록한 의존객체는 Module안에서 사용이 가능합니다. Component에서 등록한 의존객체는
자신과 자식 Component에서 사용이 가능하지요.</p>

<p>이렇게 보면 Module과 Component에 등록하는게 크게 차이가 없어 보이지만 Module에 등록하는 경우 의존객체는 하나의 객체가 
생성되서 사용됩니다. 즉, <code class="highlighter-rouge">Singleton</code> 형태로 사용된다는 것이죠. 반면 Component에 등록된 의존객체는 해당 Component가 
생성될 때 마다 의존객체가 따로 생성되게 됩니다.</p>

<p>따라서 정보공유를 목적으로 하는 Service Mediator Pattern을 이용할 경우 일반적으로 Module에 의존객체를 등록해서 사용하는것이
좋습니다.</p>

<p>이 provider에 대해서 조금만 더 알아보도록 하죠.</p>

<p>Component안에서 의존객체를 등록하려면 다음의 코드를 이용합니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-search-box'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./search-box.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./search-box.component.css'</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">HttpSupportService</span>
  <span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div>

<p>우리는 지금 의존객체라는 표현을 쓰면서 객체만이 주입되는식으로 표현했는데 실제 객체뿐만 아니라 <code class="highlighter-rouge">Value</code>도 주입할 수 있습니다. 
일단 먼저 의존객체를 주입하는 방식에 대해서 코드를 조금만 상세히 표현해 보겠습니다. 위의 코드는 사실 밑의 코드의 축약형 입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-search-box'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./search-box.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./search-box.component.css'</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">provide</span><span class="p">:</span> <span class="nx">HttpSupportService</span><span class="p">,</span>    <span class="c1">// 데이터 타입</span>
      <span class="na">useClass</span><span class="p">:</span> <span class="nx">HttpSupportService</span>    <span class="c1">// 실제 객체를 생성하기 위해 필요한 class명</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">provide</code>의 값과 <code class="highlighter-rouge">useClass</code>의 값이 같을 경우 축약형으로 표현할 수 있습니다. provide는 만들어지는 객체의 데이터 타입입니다.
useClass는 실제 객체를 생성하기 위해 사용되는 class명이구요. 당연히 두개가 틀릴 수 있습니다. <code class="highlighter-rouge">interface</code>를 이용하거나 
<code class="highlighter-rouge">duck typing</code>을 이용하면 서로 다른 데이터 타입과 class를 사용할 수 있습니다.</p>

<p>duck typing에 대해서는 <a href="./typescript-interface" target="_blank">여기</a>를 클릭하시면 간단한 내용을 확인하실 수 있습니다.</p>

<p>이번에는 의존객체가 아닌 고정값을 주입하는 방법에 대해서 알아보겠습니다. 일반적인 예는 configuration 값을 주입받는 경우입니다.
간단하게 환경설정파일을 하나 만들어서 그 안에 configuration내용을 채워놓고 그 값을 주입받아 보겠습니다.</p>

<p>command 창을 열어 다음의 명령을 실행해서 하나의 class를 생성합니다. 현재 command 창의 working directory는
<code class="highlighter-rouge">search-box</code> Component의 위치입니다.</p>

<blockquote>
  <p><strong>ng generate class jsonConfig</strong></p>
</blockquote>

<p><code class="highlighter-rouge">json-config.ts</code> 파일이 생성됩니다. 해당 파일에 다음과 같이 우리가 사용하는 JSON 파일에 대한 경로와 파일명을 설정정보로
입력합니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">JsonConfig</span> <span class="p">{</span>
  <span class="nl">url</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">name</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">JSON_DATA_CONFIG</span><span class="p">:</span> <span class="nx">JsonConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'assets/data/'</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'book.json'</span>
<span class="p">};</span>
</code></pre></div></div>

<p>다음은 <code class="highlighter-rouge">search-box.component.ts</code> 파일의 내용입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
  <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span>
  <span class="nx">Input</span><span class="p">,</span> <span class="nx">Output</span><span class="p">,</span> <span class="nx">EventEmitter</span>
<span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpSupportService</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"../http-support.service"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">JSON_DATA_CONFIG</span><span class="p">,</span> <span class="nx">JsonConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"./json-config"</span><span class="p">;</span>


<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-search-box'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./search-box.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./search-box.component.css'</span><span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">provide</span><span class="p">:</span> <span class="nx">HttpSupportService</span><span class="p">,</span>
      <span class="na">useClass</span><span class="p">:</span> <span class="nx">HttpSupportService</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">provide</span><span class="p">:</span> <span class="nx">JsonConfig</span><span class="p">,</span>
      <span class="na">useValue</span><span class="p">:</span> <span class="nx">JSON_DATA_CONFIG</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">SearchBoxComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="nl">_bookCategory</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="c1">//@Input() bookCategory:string;</span>
  <span class="c1">//@Input('bookCategory') mySelected:string;</span>

  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span>
  <span class="kd">set</span> <span class="nx">bookCategory</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="c1">// 추가적인 작업이 들어올 수 있습니다.</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_bookCategory</span> <span class="o">=</span> <span class="s1">'category: '</span> <span class="o">+</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_bookCategory</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Output</span><span class="p">()</span> <span class="nx">searchEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="p">();</span>

  <span class="nx">keyword</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="na">httpSupportService</span><span class="p">:</span><span class="nx">HttpSupportService</span><span class="p">,</span>
              <span class="kr">private</span> <span class="na">jsonConfig</span><span class="p">:</span><span class="nx">JsonConfig</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="nx">setKeyword</span><span class="p">(</span><span class="na">keyword</span><span class="p">:</span> <span class="nx">string</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">keyword</span> <span class="o">=</span> <span class="nx">keyword</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">searchEvent</span><span class="p">.</span><span class="nx">emit</span><span class="p">({</span>
      <span class="na">keyword</span> <span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">keyword</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
      <span class="na">category</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">_bookCategory</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'category: '</span><span class="p">,</span><span class="s1">''</span><span class="p">)}</span><span class="s2">`</span>
    <span class="p">});</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">httpSupportService</span><span class="p">.</span><span class="nx">getJsonData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">jsonConfig</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">jsonConfig</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>

  <span class="p">}</span>

  <span class="nx">inputChange</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>기존에 비해 몇가지 사항이 달라졌습니다. <code class="highlighter-rouge">Value</code>를 Injection받을 때 어떻게 처리해야 하는지를 유심히 보시면 됩니다.</p>

<p>service의 method를 호출할 때 주입값을 가지고 method를 호출하기 때문에 service의 코드도 변경해야 합니다.</p>

<p>다음은 <code class="highlighter-rouge">http-support.service.ts</code> 파일의 내용입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">HttpClient</span><span class="p">}</span> <span class="k">from</span> <span class="s2">"@angular/common/http"</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">IBook</span> <span class="p">{</span>
  <span class="nl">bauthor</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bdate</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btranslator</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bpublisher</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btitle</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bprice</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nl">bisbn</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bimgurl</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">HttpSupportService</span> <span class="p">{</span>

  <span class="nl">books</span><span class="p">:</span> <span class="nx">IBook</span><span class="p">[];</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getJsonData</span><span class="p">(</span><span class="nx">url</span><span class="p">:</span><span class="nx">string</span><span class="p">,</span> <span class="nx">name</span><span class="p">:</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="o">&lt;</span><span class="nx">IBook</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">url</span><span class="p">}${</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
           <span class="k">this</span><span class="p">.</span><span class="nx">books</span> <span class="o">=</span> <span class="nx">res</span><span class="p">;</span>
           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">);</span>
        <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>마지막으로 한가지가 더 남아있습니다. 의존객체를 생성할 때 객체를 그대로 사용하는게 아니라 특정 로직을 거쳐 의존객체를 생성해
사용할 수 있습니다. 객체지향에서 나왔던 <code class="highlighter-rouge">Factory Pattern</code> 생각하시면 됩니다. 이 부분은 여기서 따로 설명하지는 않겠습니다.</p>

<hr />

<p><strong class="subtitle_fontAwesome">Optional Dependency</strong></p>

<p><code class="highlighter-rouge">Optional Dependency</code>는 의존객체의 주입이 필수가 아니라는 것을 의미합니다. <code class="highlighter-rouge">@Optional</code> decorator를 이용하면 의존객체가
존재하지 않더라도 프로그램 오류가 나지 않습니다.</p>

<p>단순히 생성자에서 의존객체를 주입받을 때 <code class="highlighter-rouge">@Optional</code> decorator를 명시하시면 됩니다. 물론 의존객체가 들어오지 않을때의
로직처리는 해 주어야 합니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">httpSupportService</span><span class="p">:</span><span class="nx">HttpSupportService</span><span class="p">,</span>
            <span class="p">@</span><span class="nd">optional</span> <span class="kr">private</span> <span class="nx">jsonConfig</span><span class="p">:</span><span class="nx">JsonConfig</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<hr />

<p>이번 포스트에서는 Angular의 Service에 대해서 알아보았습니다. 기본적인 Service의 사용방법을 먼저 숙지하신 후 이 Service를
이용해 데이터를 공유하는 방법으로 넘어가면 될 듯 보입니다. 다음 포스트는 <code class="highlighter-rouge">Service Mediator Pattern</code>을 이용한 Component간
데이터 공유에 대해서 알아보도록 하겠습니다.</p>

<p>End.</p>

<hr />

<p><span class="lecture-reference">Angular 강좌는 아래의 책과 사이트를 참조했습니다.
    조금 더 자세한 사항을 알고 싶으시면 해당 사이트를 방문하세요!!</span></p>
<ul class="lecture-reference">
    <li><a href="https://angular.io/" target="_blank">Angular Official HomePage</a></li>
    <li><a href="https://material.angular.io/" target="_blank">Angular Material Official HomePage</a></li>
    <li><a href="https://scotch.io/tutorials/build-a-mobile-app-with-angular-2-and-ionic-2" target="_blank">Build a Mobile App with Angular 2 and Ionic 2</a></li>
    <li>Angular 첫걸음 - 한빛미디어</li>
    <li>제대로 배우는 Angular 4 - 비제이퍼블릭</li>
</ul>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!-- 기존에 있던 post하단 이메일 subscribe 삭제 -->

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/economy-author-logo.jpg" alt="moon9342" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/moon9342">moon9342</a></h4>
                                
                                    <p><a href="https://www.youtube.com/channel/UCp-MztINXTRVkRGCnqnYNlQ">얼큰우동TV, 쉽게배우는 IT(Programming,Machine Learning,금융)</a></p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/moon9342">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover2.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; IT Technical Training &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/angular/">Angular</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/angular-lecture-lifecycle">Angular 강좌(20) - Component LifeCycle</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/angular-lecture-pipe">Angular 강좌(19) - Pipe</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/angular-lecture-directive">Angular 강좌(18) - Directive</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/angular/">
                                
                                    See all 19 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/angular-lecture-data-share-service-mediator-pattern">
                <div class="post-card-image" style="background-image: url(/assets/built/images/angular-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/angular-lecture-data-share-service-mediator-pattern">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Angular</span>
                            
                        
                    

                    <h2 class="post-card-title">Angular 강좌(14) - Service Mediator Pattern</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>{% include angular-lecture-table-of-contents.html %} --- **Service Mediator Pattern**{: class="subtitle_fontAwesome" } 이번 포스트는 Service의 개념을 이용해서 Component간 데이터를 공유하는 Service Mediator Pattern에 대해서 알아보겠습니다. 먼저 간단한 경우부터 살펴보기로 하죠. 도서종류와 검색어를 입력하고 Search! 버튼을</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/economy-author-logo.jpg" alt="moon9342" />
                        
                        <span class="post-card-author">
                            <a href="/author/moon9342/">moon9342</a>
                        </span>
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/angular-lecture-data-share-4">
                <div class="post-card-image" style="background-image: url(/assets/built/images/angular-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/angular-lecture-data-share-4">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Angular</span>
                            
                        
                    

                    <h2 class="post-card-title">Angular 강좌(12) - 데이터공유(Content Projection)</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/economy-author-logo.jpg" alt="moon9342" />
                        
                        <span class="post-card-author">
                            <a href="/author/moon9342/">moon9342</a>
                        </span>
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="http://localhost:4000/">
            
            <span>IT Technical Training</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Angular 강좌(13) - Service</div>



    <div class="floating-header-share">
        <div class="floating-header-share-label">이 포스트를 공유하세요 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Angular+%EA%B0%95%EC%A2%8C%2813%29+-+Service&amp;url=https://moon9342.github.io/angular-lecture-data-share-service"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://moon9342.github.io/angular-lecture-data-share-service"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>


    <!-- floating-header에 이미지 삽입 -->
<!--
    <div class="floating-header-share">
        <img src="assets/images/photo.jpg" width="50">
    </div>
-->

    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->

        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://localhost:4000/">IT Technical Training</a> &copy; 2021</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/">GitHub Pages</a></section>
                <nav class="site-footer-nav">
                    <a href="mailto:moon9342@gmail.com">moon9342@gmail.com</a>
                    <a href="/">Latest Posts</a>
                    
                    
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Search IT Technical Training</h1>
                <p class="subscribe-overlay-description">lunr.js를 이용한 posts 검색 </p>
                <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()" id="searchtext" type="text" name="searchtext"  placeholder="Search..." />
    </div>
    <!--<button class="" onclick="myFunc()" id="searchBtn" type="button" ><span>Search</span></button>-->
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
    <!--<script type="text/et-cetera">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>-->
</span>


            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113135179-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
